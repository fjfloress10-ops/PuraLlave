<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base de Datos - PuraLlave</title>
    <style>
        :root {
            --primario: #0984e3; 
            --secundario: #00b894; 
            --fondo: #f1f7f9;
            --blanco: #ffffff;
            --texto: #2d3436;
            --borde: #dfe6e9;
        }

        body.dark-mode {
            --fondo: #0f172a;
            --blanco: #1e293b;
            --texto: #f1f2f6;
            --primario: #3498db;
            --secundario: #55efc4;
            --borde: #334155;
        }

        body { font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; background: var(--fondo); color: var(--texto); transition: 0.3s; }
        
        /* HEADER */
        header { background: var(--blanco); padding: 15px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header-content { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        
        .logo-wrapper { display: flex; align-items: center; text-decoration: none; }
        .logo-icon { position: relative; width: 35px; height: 40px; margin-right: 10px; }
        .casa-tejado { width: 0; height: 0; border-left: 18px solid transparent; border-right: 18px solid transparent; border-bottom: 13px solid var(--secundario); }
        .casa-cuerpo { width: 28px; height: 22px; background: var(--secundario); margin: 0 auto; border-radius: 0 0 4px 4px; }
        .txt-pura { font-size: 1.6rem; font-weight: 800; color: var(--primario); }
        .txt-llave { font-size: 1.6rem; font-weight: 300; color: var(--secundario); }

        .btn-login { background: transparent; color: var(--primario); border: 2px solid var(--primario); padding: 8px 18px; border-radius: 8px; font-weight: bold; text-decoration: none; transition: 0.3s; }
        .btn-login:hover { background: var(--primario); color: white; }
        
        .btn-perfil { background: var(--primario); color: white; border: 2px solid var(--primario); padding: 8px 18px; border-radius: 8px; font-weight: bold; text-decoration: none; transition: 0.3s; }
        .btn-perfil:hover { opacity: 0.9; transform: translateY(-2px); }

        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        
        .seccion-titulo { border-bottom: 3px solid var(--secundario); display: inline-block; padding-bottom: 5px; margin-bottom: 25px; color: var(--primario); font-weight: 800; text-transform: uppercase; letter-spacing: 1px; }
        
        .estadisticas { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--blanco); padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .stat-number { font-size: 2rem; font-weight: bold; color: var(--primario); margin-bottom: 5px; }
        .stat-label { color: var(--texto); opacity: 0.7; }
        
        .filtros { background: var(--blanco); padding: 20px; border-radius: 15px; margin-bottom: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .filtros h3 { margin-top: 0; color: var(--primario); }
        .filtro-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px; }
        .filtro-item label { display: block; margin-bottom: 5px; font-weight: 600; color: var(--texto); opacity: 0.8; }
        .filtro-item select, .filtro-item input { width: 100%; padding: 8px; border: 1px solid var(--borde); border-radius: 8px; background: var(--fondo); color: var(--texto); }
        
        .tabla-container { background: var(--blanco); border-radius: 15px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 30px; }
        .tabla { width: 100%; border-collapse: collapse; }
        .tabla th { background: var(--primario); color: white; padding: 12px; text-align: left; font-weight: 600; }
        .tabla td { padding: 12px; border-bottom: 1px solid var(--borde); }
        .tabla tr:hover { background: rgba(9, 132, 227, 0.05); }
        
        .estado-badge { padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: bold; text-align: center; display: inline-block; }
        .estado-activo { background: rgba(0, 184, 148, 0.2); color: var(--secundario); }
        .estado-reservado { background: rgba(255, 193, 7, 0.2); color: #ffc107; }
        .estado-vendido { background: rgba(40, 167, 69, 0.2); color: #28a745; }
        .estado-alquilado { background: rgba(23, 162, 184, 0.2); color: #17a2b8; }
        
        .acciones { display: flex; gap: 5px; }
        .btn-accion { padding: 4px 8px; border: none; border-radius: 4px; font-size: 0.75rem; cursor: pointer; transition: 0.2s; }
        .btn-ver { background: var(--primario); color: white; }
        .btn-editar { background: var(--secundario); color: white; }
        .btn-eliminar { background: #dc3545; color: white; }
        .btn-accion:hover { opacity: 0.8; transform: translateY(-1px); }
        
        .btn-dark-mode { position: fixed; bottom: 20px; right: 20px; z-index: 1000; padding: 12px 20px; border-radius: 50px; border: none; cursor: pointer; background: var(--primario); color: white; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: 0.3s; }
        .btn-exportar { background: var(--secundario); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; margin-bottom: 20px; }
        
        @media (max-width: 768px) { 
            .header-content { flex-direction: column; gap: 15px; }
            .tabla-container { overflow-x: auto; }
            .filtro-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<button onclick="toggleDarkMode()" class="btn-dark-mode" id="btnDark">üåô Modo Oscuro</button>

<header>
    <div class="header-content">
        <div class="logo-wrapper">
            <div class="logo-icon">
                <div class="casa-tejado"></div>
                <div class="casa-cuerpo"></div>
            </div>
            <div class="logo-texto">
                <span class="txt-pura">Pura</span><span class="txt-llave">Llave</span>
            </div>
        </div>
        <div id="headerAuth"></div>
    </div>
</header>

<div class="container">
    <h2 class="seccion-titulo">BASE DE DATOS COMPLETA</h2>
    
    <!-- Estad√≠sticas -->
    <div class="estadisticas">
        <div class="stat-card">
            <div class="stat-number" id="totalAnuncios">0</div>
            <div class="stat-label">Total Anuncios</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="totalUsuarios">0</div>
            <div class="stat-label">Usuarios Activos</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="anunciosActivos">0</div>
            <div class="stat-label">Anuncios Activos</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="anunciosVendidos">0</div>
            <div class="stat-label">Vendidos/Alquilados</div>
        </div>
    </div>
    
    <!-- Filtros -->
    <div class="filtros">
        <h3>Filtrar Anuncios</h3>
        <div class="filtro-grid">
            <div class="filtro-item">
                <label>Tipo de Inmueble</label>
                <select id="filtroTipo" onchange="filtrarAnuncios()">
                    <option value="">Todos los tipos</option>
                    <option value="piso">Piso / Casa</option>
                    <option value="habitacion">Habitaci√≥n</option>
                    <option value="garaje">Plaza de Garaje</option>
                    <option value="trastero">Trastero</option>
                    <option value="nave">Nave Industrial</option>
                    <option value="local">Local Comercial</option>
                    <option value="terreno">Terreno</option>
                </select>
            </div>
            <div class="filtro-item">
                <label>Estado</label>
                <select id="filtroEstado" onchange="filtrarAnuncios()">
                    <option value="">Todos los estados</option>
                    <option value="activo">Activo</option>
                    <option value="reservado">Reservado</option>
                    <option value="vendido">Vendido</option>
                    <option value="alquilado">Alquilado</option>
                </select>
            </div>
            <div class="filtro-item">
                <label>Usuario</label>
                <input type="text" id="filtroUsuario" placeholder="Email del usuario" oninput="filtrarAnuncios()">
            </div>
            <div class="filtro-item">
                <label>Precio M√°ximo</label>
                <input type="number" id="filtroPrecio" placeholder="‚Ç¨" oninput="filtrarAnuncios()">
            </div>
        </div>
    </div>
    
    <!-- Botones de acci√≥n -->
    <button class="btn-exportar" onclick="exportarDatos()">üì• Exportar Datos (JSON)</button>
    
    <!-- Tabla de datos -->
    <div class="tabla-container">
        <table class="tabla">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>T√≠tulo</th>
                    <th>Tipo</th>
                    <th>Precio</th>
                    <th>Localidad</th>
                    <th>Usuario</th>
                    <th>Estado</th>
                    <th>Fotos</th>
                    <th>Videos</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="tablaDatos">
                <!-- Se llenar√° con JavaScript -->
            </tbody>
        </table>
    </div>
    
    <div id="mensajeVacio" style="text-align: center; padding: 50px; display: none;">
        <h3 style="color: var(--texto); opacity: 0.6;">No se encontraron anuncios</h3>
        <p style="color: var(--texto); opacity: 0.4;">Intenta ajustar los filtros para ver m√°s resultados</p>
    </div>
</div>

<script>
    let todosLosAnuncios = [];
    let anunciosFiltrados = [];

    // MODO OSCURO
    function toggleDarkMode() {
        const body = document.body;
        body.classList.toggle('dark-mode');
        const isDark = body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', isDark);
        document.getElementById('btnDark').innerText = isDark ? "‚òÄÔ∏è Modo Claro" : "üåô Modo Oscuro";
    }

    // Obtener texto legible para el tipo de inmueble
    function getTipoInmuebleTexto(tipo) {
        const tipos = {
            'piso': 'Piso / Casa',
            'habitacion': 'Habitaci√≥n',
            'garaje': 'Plaza de Garaje',
            'trastero': 'Trastero',
            'nave': 'Nave Industrial',
            'local': 'Local Comercial',
            'terreno': 'Terreno'
        };
        return tipos[tipo] || tipo;
    }

    // Obtener texto legible para el estado
    function getEstadoTexto(estado) {
        const estados = {
            'activo': 'Activo',
            'reservado': 'Reservado',
            'vendido': 'Vendido',
            'alquilado': 'Alquilado'
        };
        return estados[estado] || 'Activo';
    }

    function getEstadoClass(estado) {
        const estados = {
            'activo': 'estado-activo',
            'reservado': 'estado-reservado',
            'vendido': 'estado-vendido',
            'alquilado': 'estado-alquilado'
        };
        return estados[estado] || 'estado-activo';
    }

    // Formatear fecha
    function formatearFecha(timestamp) {
        const fecha = new Date(timestamp);
        return fecha.toLocaleDateString('es-ES') + ' ' + fecha.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
    }

    // Cargar todos los anuncios
    function cargarAnuncios() {
        const anuncios = JSON.parse(localStorage.getItem('misAnuncios')) || [];
        const usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
        
        // Ordenar por fecha (m√°s recientes primero)
        todosLosAnuncios = anuncios.sort((a, b) => b.fecha - a.fecha);
        anunciosFiltrados = [...todosLosAnuncios];
        
        // Actualizar estad√≠sticas
        actualizarEstadisticas(anuncios, usuarios);
        
        // Mostrar anuncios
        mostrarAnuncios();
    }

    // Actualizar estad√≠sticas
    function actualizarEstadisticas(anuncios, usuarios) {
        document.getElementById('totalAnuncios').textContent = anuncios.length;
        document.getElementById('totalUsuarios').textContent = usuarios.length;
        document.getElementById('anunciosActivos').textContent = anuncios.filter(a => !a.estado || a.estado === 'activo').length;
        document.getElementById('anunciosVendidos').textContent = anuncios.filter(a => a.estado === 'vendido' || a.estado === 'alquilado').length;
    }

    // Mostrar anuncios en la tabla
    function mostrarAnuncios() {
        const tbody = document.getElementById('tablaDatos');
        const mensajeVacio = document.getElementById('mensajeVacio');
        
        if (anunciosFiltrados.length === 0) {
            tbody.innerHTML = '';
            mensajeVacio.style.display = 'block';
            return;
        }
        
        mensajeVacio.style.display = 'none';
        
        tbody.innerHTML = anunciosFiltrados.map(anuncio => `
            <tr>
                <td>${formatearFecha(anuncio.fecha)}</td>
                <td><strong>${anuncio.titulo}</strong></td>
                <td>${getTipoInmuebleTexto(anuncio.tipo)}</td>
                <td>${Number(anuncio.precio).toLocaleString()} ‚Ç¨${anuncio.tipoAnuncio === 'alquilar' ? '/mes' : ''}</td>
                <td>${anuncio.localidad || 'Sin especificar'}</td>
                <td>${anuncio.duenoEmail}</td>
                <td><span class="estado-badge ${getEstadoClass(anuncio.estado)}">${getEstadoTexto(anuncio.estado)}</span></td>
                <td>${anuncio.tieneFotos || 0}</td>
                <td>${anuncio.tieneVideos || 0}</td>
                <td>
                    <div class="acciones">
                        <button class="btn-accion btn-ver" onclick="verDetalle('${anuncio.fecha}')">üëÅÔ∏è</button>
                        <button class="btn-accion btn-editar" onclick="editarAnuncio('${anuncio.fecha}')">‚úèÔ∏è</button>
                        <button class="btn-accion btn-eliminar" onclick="eliminarAnuncio('${anuncio.fecha}')">üóëÔ∏è</button>
                    </div>
                </td>
            </tr>
        `).join('');
    }

    // Filtrar anuncios
    function filtrarAnuncios() {
        const tipo = document.getElementById('filtroTipo').value;
        const estado = document.getElementById('filtroEstado').value;
        const usuario = document.getElementById('filtroUsuario').value.toLowerCase();
        const precioMax = document.getElementById('filtroPrecio').value;
        
        anunciosFiltrados = todosLosAnuncios.filter(anuncio => {
            const matchTipo = !tipo || anuncio.tipo === tipo;
            const matchEstado = !estado || (anuncio.estado || 'activo') === estado;
            const matchUsuario = !usuario || anuncio.duenoEmail.toLowerCase().includes(usuario);
            const matchPrecio = !precioMax || Number(anuncio.precio) <= Number(precioMax);
            
            return matchTipo && matchEstado && matchUsuario && matchPrecio;
        });
        
        mostrarAnuncios();
    }

    // Ver detalle de anuncio
    function verDetalle(fecha) {
        const anuncio = todosLosAnuncios.find(a => a.fecha == fecha);
        if (anuncio) {
            const detalle = `
T√≠tulo: ${anuncio.titulo}
Tipo: ${getTipoInmuebleTexto(anuncio.tipo)}
Tipo de anuncio: ${anuncio.tipoAnuncio === 'vender' ? 'Venta' : 'Alquiler'}
Precio: ${Number(anuncio.precio).toLocaleString()} ‚Ç¨${anuncio.tipoAnuncio === 'alquilar' ? '/mes' : ''}
Localidad: ${anuncio.localidad || 'No especificada'}
Dimensiones: ${anuncio.dimensiones || 'No especificada'} m¬≤
Habitaciones: ${anuncio.habitaciones || 'No aplica'}
Ba√±os: ${anuncio.banos || 'No aplica'}
Estado: ${getEstadoTexto(anuncio.estado)}
Usuario: ${anuncio.duenoEmail}
Fecha de publicaci√≥n: ${formatearFecha(anuncio.fecha)}
Fotos: ${anuncio.tieneFotos || 0}
Videos: ${anuncio.tieneVideos || 0}

Descripci√≥n:
${anuncio.descripcion || 'Sin descripci√≥n disponible'}
            `;
            alert(detalle);
        }
    }

    // Editar anuncio (redirigir a perfil del due√±o)
    function editarAnuncio(fecha) {
        const anuncio = todosLosAnuncios.find(a => a.fecha == fecha);
        if (anuncio) {
            alert(`Para editar este anuncio, debes iniciar sesi√≥n como el usuario: ${anuncio.duenoEmail}`);
        }
    }

    // Eliminar anuncio
    function eliminarAnuncio(fecha) {
        if (!confirm('¬øEst√°s seguro de que quieres eliminar este anuncio? Esta acci√≥n no se puede deshacer.')) {
            return;
        }
        
        const index = todosLosAnuncios.findIndex(a => a.fecha == fecha);
        if (index !== -1) {
            todosLosAnuncios.splice(index, 1);
            localStorage.setItem('misAnuncios', JSON.stringify(todosLosAnuncios));
            cargarAnuncios();
            alert('‚úÖ Anuncio eliminado correctamente');
        }
    }

    // Exportar datos
    function exportarDatos() {
        const datos = {
            fecha_exportacion: new Date().toISOString(),
            total_anuncios: todosLosAnuncios.length,
            anuncios: todosLosAnuncios
        };
        
        const dataStr = JSON.stringify(datos, null, 2);
        const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
        
        const exportFileDefaultName = `purallave_datos_${new Date().toISOString().slice(0,10)}.json`;
        
        const linkElement = document.createElement('a');
        linkElement.setAttribute('href', dataUri);
        linkElement.setAttribute('download', exportFileDefaultName);
        linkElement.click();
    }

    // Verificar autenticaci√≥n
    function verificarAuth() {
        const user = JSON.parse(localStorage.getItem('usuarioSesion'));
        const headerAuth = document.getElementById('headerAuth');
        
        if (user) {
            headerAuth.innerHTML = `
                <a href="perfil.html" class="btn-perfil">üë§ ${user.nombre}</a>
            `;
        } else {
            headerAuth.innerHTML = `
                <a href="login.html" class="btn-login">Iniciar Sesi√≥n</a>
            `;
        }
    }

    // CARGA INICIAL
    window.onload = () => {
        // Configurar modo oscuro
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            document.getElementById('btnDark').innerText = "‚òÄÔ∏è Modo Claro";
        }
        
        // Verificar autenticaci√≥n
        verificarAuth();
        
        // Cargar anuncios
        cargarAnuncios();
        
        // Verificar si viene de purallave.html con un anuncio espec√≠fico
        const pisoActual = localStorage.getItem('pisoActual');
        if (pisoActual) {
            // Limpiar el dato despu√©s de usarlo
            localStorage.removeItem('pisoActual');
            
            // Buscar y mostrar solo el anuncio espec√≠fico
            const anuncioEspecifico = todosLosAnuncios.find(a => a.fecha == parseInt(pisoActual));
            if (anuncioEspecifico) {
                mostrarAnuncioEspecifico(anuncioEspecifico);
            } else {
                // Si no se encuentra, mostrar todos los anuncios
                mostrarAnuncios();
            }
        }
    };
    
    // Mostrar anuncio espec√≠fico con todos los detalles
    function mostrarAnuncioEspecifico(anuncio) {
        // Ocultar tabla y estad√≠sticas
        document.querySelector('.estadisticas').style.display = 'none';
        document.querySelector('.filtros').style.display = 'mostrar';
        document.querySelector('.tabla-container').style.display = 'none';
        document.querySelector('.btn-exportar').style.display = 'none';
        document.querySelector('.btn-backup').style.display = 'none';
        
        // Ocultar mensaje vac√≠o si existe
        document.getElementById('mensajeVacio').style.display = 'none';
        
        // Crear vista detallada del anuncio
        const contenedor = document.querySelector('.container');
        const anuncioHTML = `
            <div style="background: var(--blanco); border-radius: 15px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="color: var(--primario); margin: 0;">${anuncio.titulo}</h2>
                    <button class="btn-exportar" onclick="volverLista()">üìã Volver a Lista</button>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 300px; gap: 30px;">
                    <div>
                        <div style="margin-bottom: 20px;">
                            <h3 style="color: var(--primario); border-bottom: 2px solid var(--secundario); padding-bottom: 5px;">Informaci√≥n Principal</h3>
                            <p><strong>Tipo:</strong> ${getTipoInmuebleTexto(anuncio.tipo)}</p>
                            <p><strong>Estado:</strong> <span class="estado-badge ${getEstadoClass(anuncio.estado)}">${getEstadoTexto(anuncio.estado)}</span></p>
                            <p><strong>Precio:</strong> <span style="color: var(--secundario); font-size: 1.5rem; font-weight: bold;">${Number(anuncio.precio).toLocaleString()} ‚Ç¨${anuncio.tipoAnuncio === 'alquilar' ? '/mes' : ''}</span></p>
                            <p><strong>Localidad:</strong> ${anuncio.localidad || 'No especificada'}</p>
                            <p><strong>Dimensiones:</strong> ${anuncio.dimensiones || 'No especificada'} m¬≤</p>
                            ${anuncio.habitaciones ? `<p><strong>Habitaciones:</strong> ${anuncio.habitaciones}</p>` : ''}
                            ${anuncio.banos ? `<p><strong>Ba√±os:</strong> ${anuncio.banos}</p>` : ''}
                            <p><strong>Publicado:</strong> ${formatearFecha(anuncio.fecha)}</p>
                            <p><strong>Usuario:</strong> ${anuncio.duenoEmail}</p>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <h3 style="color: var(--primario); border-bottom: 2px solid var(--secundario); padding-bottom: 5px;">Descripci√≥n</h3>
                            <div style="background: var(--fondo); padding: 15px; border-radius: 8px; min-height: 100px;">
                                ${anuncio.descripcion || '<em style="color: var(--texto); opacity: 0.6;">Sin descripci√≥n disponible</em>'}
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="color: var(--primario); border-bottom: 2px solid var(--secundario); padding-bottom: 5px;">Multimedia</h3>
                            <p><strong>Fotos subidas:</strong> ${anuncio.tieneFotos || 0} de 35</p>
                            <p><strong>Videos subidos:</strong> ${anuncio.tieneVideos || 0} de 2</p>
                            ${anuncio.tieneFotos > 0 ? `
                                <div style="margin-top: 15px;">
                                    <h4 style="color: var(--texto); font-size: 1rem; margin-bottom: 10px;">üì∏ Galer√≠a de Fotos</h4>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px;">
                                        ${Array.from({length: Math.min(anuncio.tieneFotos, 6)}, (_, i) => `
                                            <div style="background: var(--fondo); border: 1px solid var(--borde); border-radius: 8px; height: 100px; display: flex; align-items: center; justify-content: center; color: var(--texto); font-size: 0.8rem;">
                                                üì∑ Foto ${i + 1}
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            ${anuncio.tieneVideos > 0 ? `
                                <div style="margin-top: 15px;">
                                    <h4 style="color: var(--texto); font-size: 1rem; margin-bottom: 10px;">üé• Galer√≠a de Videos</h4>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px;">
                                        ${Array.from({length: Math.min(anuncio.tieneVideos, 2)}, (_, i) => `
                                            <div style="background: var(--fondo); border: 1px solid var(--borde); border-radius: 8px; height: 100px; display: flex; align-items: center; justify-content: center; color: var(--texto); font-size: 0.8rem;">
                                                üé• Video ${i + 1}
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                    
                    <div>
                        <div style="margin-bottom: 20px;">
                            <h3 style="color: var(--primario); border-bottom: 2px solid var(--secundario); padding-bottom: 5px;">Contacto del Propietario</h3>
                            <p><strong>Email:</strong> ${anuncio.duenoEmail}</p>
                            <p><strong>Fecha de Registro:</strong> ${formatearFecha(anuncio.fecha)}</p>
                            <div style="margin-top: 15px;">
                        </div>
                        ${anuncio.estado === 'activo' ? `<p style="margin-top: 10px; color: var(--texto); opacity: 0.7;">Este anuncio est√° activo y disponible.</p>` : ''}
                        ${anuncio.estado === 'reservado' ? `<p style="margin-top: 10px; color: var(--texto); opacity: 0.7;">Este anuncio est√° reservado temporalmente.</p>` : ''}
                        ${anuncio.estado === 'vendido' || anuncio.estado === 'alquilado' ? `<p style="margin-top: 10px; color: var(--texto); opacity: 0.7;">${anuncio.estado === 'vendido' ? 'Este anuncio ha sido vendido.' : 'Este anuncio ha sido alquilado.'}</p>` : ''}
                    </div>
                </div>
            </div>
        </div>
    `;
        // Insertar el HTML despu√©s del t√≠tulo
        const titulo = document.querySelector('.seccion-titulo');
        titulo.insertAdjacentHTML('after', anuncioHTML);
    }
    
    // Volver a la lista de anuncios
    function volverLista() {
        // Restaurar vista normal
        document.querySelector('.estadisticas').style.display = 'grid';
        document.querySelector('.filtros').style.display = 'block';
        document.querySelector('.tabla-container').style.display = 'block';
        document.querySelector('.btn-exportar').style.display = 'inline-block';
        document.querySelector('.btn-backup').style.display = 'inline-block';
        
        // Eliminar el anuncio espec√≠fico si existe
        const anuncioEspecifico = document.querySelector('.container > div:last-child');
        if (anuncioEspecifico && anuncioEspecifico.innerHTML.includes('Informaci√≥n Principal')) {
            anuncioEspecifico.remove();
        }
        
        // Mostrar todos los anuncios
        mostrarAnuncios();
    }
    
    // Contactar propietario
    function contactarPropietario(email) {
        alert(`Para contactar al propietario, puedes enviar un email a: ${email}\n\nEsta funci√≥n redirigir√° a la secci√≥n de chat o formulario de contacto.`);
        // En una implementaci√≥n real, esto redirigir√≠a a chat.html con el email prellenado
    }
</script>

</body>
</html>